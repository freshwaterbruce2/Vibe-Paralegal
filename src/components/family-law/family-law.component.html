<div class="p-8 overflow-y-auto">
  <h2 class="text-3xl font-bold mb-6 text-gray-100">Family Law Center</h2>
  <div class="space-y-6">

    <!-- Case Vitals -->
    <div class="bg-gray-900/50 rounded-lg border border-gray-700 p-6">
      <h3 class="text-lg font-semibold text-gray-300 mb-4">Case Vitals</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="text-sm text-gray-400">Case Number</label>
          <input type="text" [value]="details().caseNumber" (input)="handleDetailsInput('caseNumber', $event)" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md">
        </div>
        <div>
          <label class="text-sm text-gray-400">County</label>
          <input type="text" [value]="details().county" (input)="handleDetailsInput('county', $event)" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md">
        </div>
        <div>
          <label class="text-sm text-gray-400">Opposing Party</label>
          <input type="text" [value]="details().opposingParty" (input)="handleDetailsInput('opposingParty', $event)" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md">
        </div>
        <div>
          <label class="text-sm text-gray-400">Opposing Counsel</label>
          <input type="text" [value]="details().opposingCounsel" (input)="handleDetailsInput('opposingCounsel', $event)" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md">
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Upcoming Events -->
        <div class="bg-gray-900/50 rounded-lg border border-gray-700 p-6">
            <h3 class="text-lg font-semibold text-gray-300 mb-4">Upcoming Events</h3>
            <ul class="space-y-2">
                @for(event of events(); track event.date) {
                    <li class="flex justify-between items-center p-2 bg-gray-800/50 rounded">
                        <div>
                            <p class="font-semibold">{{event.description}}</p>
                            <p class="text-sm text-gray-400">{{event.date}}</p>
                        </div>
                        <span class="px-2 py-1 text-xs font-semibold bg-blue-500/20 text-blue-300 rounded-full">{{event.type}}</span>
                    </li>
                }
            </ul>
        </div>

        <!-- Key Issues Status -->
        <div class="bg-gray-900/50 rounded-lg border border-gray-700 p-6">
            <h3 class="text-lg font-semibold text-gray-300 mb-4">Key Issues Status</h3>
            <div class="space-y-3">
                @for(issue of keyIssues(); track issue.id) {
                    <div class="flex justify-between items-center">
                        <label [for]="'issue-status-' + issue.id" class="text-gray-300">{{issue.name}}</label>
                        <select [id]="'issue-status-' + issue.id" (change)="handleIssueStatusChange(issue.id, $event)" [value]="issue.status" class="bg-gray-700 border border-gray-600 rounded-md p-1 text-sm">
                            <option>Pending</option>
                            <option>In Progress</option>
                            <option>Disputed</option>
                            <option>Resolved</option>
                        </select>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Financial Log -->
    <div class="bg-gray-900/50 rounded-lg border border-gray-700 p-6">
      <h3 class="text-lg font-semibold text-gray-300 mb-4">Financial Log</h3>
      <!-- New Entry Form -->
      <form (submit)="$event.preventDefault(); addFinancialLogEntry()" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end p-4 mb-4 border border-gray-800 rounded-lg bg-gray-950/50">
          <div><label class="text-xs text-gray-400">Date</label><input type="date" [value]="newLogEntry().date" (input)="handleNewLogInput('date', $event)" required class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md"></div>
          <div><label class="text-xs text-gray-400">Description</label><input type="text" [value]="newLogEntry().description" (input)="handleNewLogInput('description', $event)" required placeholder="e.g., Monthly support payment" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md"></div>
          <div><label class="text-xs text-gray-400">Amount</label><input type="number" step="0.01" [value]="newLogEntry().amount" (input)="handleNewLogInput('amount', $event)" required placeholder="0.00" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md"></div>
          <div><label class="text-xs text-gray-400">Type</label><select [value]="newLogEntry().type" (change)="handleNewLogInput('type', $event)" class="w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded-md"><option>Child Support</option><option>Alimony</option><option>Legal Fees</option><option>Other</option></select></div>
          <div class="md:col-span-4 text-right"><button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-500">Add Entry</button></div>
      </form>
      <!-- Log Table -->
      <table class="w-full text-left">
          <thead class="bg-gray-800/50 text-sm">
              <tr><th class="p-2 font-semibold">Date</th><th class="p-2 font-semibold">Description</th><th class="p-2 font-semibold">Type</th><th class="p-2 font-semibold text-right">Amount</th><th class="p-2"></th></tr>
          </thead>
          <tbody class="divide-y divide-gray-700">
              @for(entry of financialLog(); track entry.id) {
                  <tr>
                      <td class="p-2">{{entry.date}}</td>
                      <td class="p-2">{{entry.description}}</td>
                      <td class="p-2"><span class="px-2 py-1 text-xs font-semibold bg-gray-600/50 text-gray-300 rounded-full">{{entry.type}}</span></td>
                      <td class="p-2 text-right font-mono">${{entry.amount.toFixed(2)}}</td>
                      <td class="p-2 text-center"><button (click)="removeFinancialLogEntry(entry.id)" class="text-red-500 hover:text-red-400">&times;</button></td>
                  </tr>
              } @empty {
                <tr><td colspan="5" class="text-center p-8 text-gray-500">No financial entries logged yet.</td></tr>
              }
          </tbody>
      </table>
    </div>

  </div>
</div>
